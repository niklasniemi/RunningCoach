<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#000000">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="manifest" href="./manifest.json?v=54">
  <title>Marathon Trainer</title>
  <link rel="stylesheet" href="./styles.css?v=54">
</head>
<body>
  <main class="main">
    <header class="topbar">
      <div class="brand">Marathon Trainer</div>
      <button class="btn small" onclick="hardResetPWA()" title="Reset cache">Reset</button>
    </header>

    <section id="view" class="view"></section>

    <nav class="bottombar navbar-bottom">
      <button class="tab active" data-tab="overview">Overview</button>
      <button class="tab" data-tab="calendar">Calendar</button>
      <button class="tab" data-tab="plan">Plan</button>
      <button class="tab" data-tab="coach">Coach</button>
      <button class="tab" data-tab="settings">Settings</button>
    </nav>
  </main>

  <script src="./app.js?v=54" defer></script>
  <script>
    (function(){
      if (!('serviceWorker' in navigator)) return;
      const isProdHost = location.protocol === 'https:' && !/^(localhost|127\.|10\.|192\.168\.)/.test(location.hostname);
      if (isProdHost) {
        navigator.serviceWorker.register('./sw.js?v=54').catch(console.error);
      } else {
        navigator.serviceWorker.getRegistrations().then(rs => rs.forEach(r => r.unregister()));
        if (window.caches) caches.keys().then(ks => ks.forEach(k => caches.delete(k)));
      }
    })();
  </script>
</body>
</html>
